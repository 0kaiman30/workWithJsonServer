<div class="container">
  <h2>Users List</h2>

  <div *ngIf="isLoading">Loading...</div>

  <input type="text" placeholder="Search..." [(ngModel)]="searchTerm" (input)="filterUsers()" />

  <div class="sort-buttons">
    <button (click)="sortBy('name')">Sort by Name</button>
    <button (click)="sortBy('age')">Sort by Age</button>
  </div>

  <ul>
    <li *ngFor="let user of filteredUsers">
      {{ user.name }} â€” {{ user.age }} years old
      <button (click)="openModal('edit', user)">Update</button>
      <button (click)="deleteUser(user.id)">Delete</button>
    </li>
  </ul>

  <div class="pagination">
    <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">Prev</button>
    <span>Page {{ currentPage }} of {{ totalPages }}</span>
    <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">Next</button>
  </div>

  <hr />

  <button (click)="openModal('add')">Add New User</button>

  <div class="modal-backdrop" *ngIf="showModal" [@fadeInOut]>
    <div class="modal" [@slideInOut]>
      <h3>{{ modalMode === 'add' ? 'Add User' : 'Edit User' }}</h3>

      <form [formGroup]="userForm" (ngSubmit)="saveUser()">
        <input formControlName="name" placeholder="Name" />
        <input formControlName="age" type="number" placeholder="Age" />
        <div class="modal-actions">
          <button type="submit" [disabled]="userForm.invalid">Save</button>
          <button type="button" (click)="closeModal()">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>
